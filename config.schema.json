{
  "pluginAlias": "HTTP-LIGHTBULB",
  "pluginType": "accessory",
  "singular": true,
  "headerDisplay": "HTTP Lightbulb Accessory",
  "schema": {
    "type": "object",
    "properties": {
      "name": {
        "title": "Name",
        "type": "string",
				"required": true,
        "default": "HTTP Lightbulb"
      },
      "onUrl": {
        "type": "object",
        "title": "On URL",
        "required": true,
        "properties": {
          "url": {
            "type": "string",
            "title": "URL",
            "required": true,
            "default": "http://localhost/on"
          },
          "method": {
            "type": "string",
            "enum": ["GET", "POST", "PUT", "DELETE"],
            "default": "GET",
            "title": "HTTP Method"
          },
          "body": {
            "type": "string",
            "title": "Body (optional)"
          },
          "strictSSL": {
            "type": "boolean",
            "title": "Strict SSL",
            "default": false
          },
          "auth": {
            "type": "object",
            "title": "HTTP Authentication (optional)",
            "required": false,
            "properties": {
              "username": {
                "type": "string",
                "title": "Username",
                "required": true
              },
              "password": {
                "type": "string",
                "title": "Password",
                "required": true
              },
              "sendImmediately": {
                "type": "boolean",
                "title": "Send Immediately",
                "default": false
              }
            }
          },
          "headers": {
            "type": "object",
            "title": "Headers (optional)",
            "required": false,
            "properties": {
              "Content-Type": {
                "type": "string",
                "title": "Content-Type",
                "default": "application/json"
              },
              "Custom-Header": {
                "type": "string",
                "title": "Custom Header"
              }
            }
          }
        }
      },
      "offUrl": {
        "type": "object",
        "title": "Off URL",
        "required": true,
        "properties": {
          "url": {
            "type": "string",
            "title": "URL",
            "required": true,
            "default": "http://localhost/off"
          },
          "method": {
            "type": "string",
            "enum": ["GET", "POST", "PUT", "DELETE"],
            "default": "GET",
            "title": "HTTP Method"
          },
          "body": {
            "type": "string",
            "title": "Body (optional)"
          },
          "strictSSL": {
            "type": "boolean",
            "title": "Strict SSL",
            "default": false
          },
          "auth": {
            "type": "object",
            "title": "HTTP Authentication (optional)",
            "required": false,
            "properties": {
              "username": {
                "type": "string",
                "title": "Username",
                "required": true
              },
              "password": {
                "type": "string",
                "title": "Password",
                "required": true
              },
              "sendImmediately": {
                "type": "boolean",
                "title": "Send Immediately",
                "default": false
              }
            }
          },
          "headers": {
            "type": "object",
            "title": "Headers (optional)",
            "required": false,
            "properties": {
              "Content-Type": {
                "type": "string",
                "title": "Content-Type",
                "default": "application/json"
              },
              "Custom-Header": {
                "type": "string",
                "title": "Custom Header"
              }
            }
          }
        }
      },
      "statusUrl": {
        "type": "object",
        "title": "Status URL",
        "required": true,
        "properties": {
          "url": {
            "type": "string",
            "title": "URL",
            "required": true,
            "default": "http://localhost/status"
          },
          "method": {
            "type": "string",
            "enum": ["GET", "POST", "PUT", "DELETE"],
            "default": "GET",
            "title": "HTTP Method"
          },
          "body": {
            "type": "string",
            "title": "Body (optional)"
          },
          "strictSSL": {
            "type": "boolean",
            "title": "Strict SSL",
            "default": false
          },
          "auth": {
            "type": "object",
            "title": "HTTP Authentication (optional)",
            "required": false,
            "properties": {
              "username": {
                "type": "string",
                "title": "Username",
                "required": true
              },
              "password": {
                "type": "string",
                "title": "Password",
                "required": true
              },
              "sendImmediately": {
                "type": "boolean",
                "title": "Send Immediately",
                "default": false
              }
            }
          },
          "headers": {
            "type": "object",
            "title": "Headers (optional)",
            "required": false,
            "properties": {
              "Content-Type": {
                "type": "string",
                "title": "Content-Type",
                "default": "application/json"
              },
              "Custom-Header": {
                "type": "string",
                "title": "Custom Header"
              }
            }
          }
        }
      },
      "statusPattern": {
        "type": "string",
        "title": "Power Status Pattern (RegExp)",
        "default": "1"
      },
      "brightness": {
        "title": "Brightness",
        "type": "object",
        "properties": {
          "setUrl": {
            "type": "object",
            "title": "Set URL",
            "required": true,
            "properties": {
              "url": {
                "type": "string",
                "title": "URL",
                "required": true,
                "default": "http://localhost/bri/%s"
              },
              "method": {
                "type": "string",
                "enum": ["GET", "POST", "PUT", "DELETE"],
                "default": "GET",
                "title": "HTTP Method"
              },
              "body": {
                "type": "string",
                "title": "Body (optional)"
              },
              "strictSSL": {
                "type": "boolean",
                "title": "Strict SSL",
                "default": false
              },
              "auth": {
                "type": "object",
                "title": "HTTP Authentication (optional)",
                "required": false,
                "properties": {
                  "username": {
                    "type": "string",
                    "title": "Username",
                    "required": true
                  },
                  "password": {
                    "type": "string",
                    "title": "Password",
                    "required": true
                  },
                  "sendImmediately": {
                    "type": "boolean",
                    "title": "Send Immediately",
                    "default": false
                  }
                }
              },
              "headers": {
                "type": "object",
                "title": "Headers (optional)",
                "required": false,
                "properties": {
                  "Content-Type": {
                    "type": "string",
                    "title": "Content-Type",
                    "default": "application/json"
                  },
                  "Custom-Header": {
                    "type": "string",
                    "title": "Custom Header"
                  }
                }
              }
            }
          },
          "statusUrl": {
            "type": "object",
            "title": "Status URL",
            "properties": {
              "url": {
                "type": "string",
                "title": "URL",
                "default": "http://localhost/status"
              },
              "method": {
                "type": "string",
                "enum": ["GET", "POST", "PUT", "DELETE"],
                "default": "GET",
                "title": "HTTP Method"
              },
              "body": {
                "type": "string",
                "title": "Body (optional)"
              },
              "strictSSL": {
                "type": "boolean",
                "title": "Strict SSL",
                "default": false
              },
              "auth": {
                "type": "object",
                "title": "HTTP Authentication (optional)",
                "required": false,
                "properties": {
                  "username": {
                    "type": "string",
                    "title": "Username",
                    "required": true
                  },
                  "password": {
                    "type": "string",
                    "title": "Password",
                    "required": true
                  },
                  "sendImmediately": {
                    "type": "boolean",
                    "title": "Send Immediately",
                    "default": false
                  }
                }
              },
              "headers": {
                "type": "object",
                "title": "Headers (optional)",
                "required": false,
                "properties": {
                  "Content-Type": {
                    "type": "string",
                    "title": "Content-Type",
                    "default": "application/json"
                  },
                  "Custom-Header": {
                    "type": "string",
                    "title": "Custom Header"
                  }
                }
              }
            }
          },
          "unit": {
            "type": "string",
            "enum": ["percent", "rgb"],
            "default": "percent",
            "title": "Unit"
          },
          "statusPattern": {
            "type": "string",
            "title": "Status Pattern (RegExp)",
            "default": "([0-9]{1,3})"
          },
          "patternGroupToExtract": {
            "type": "integer",
            "title": "Pattern Group To Extract",
            "default": 1
          },
          "withholdPowerUpdate": {
            "type": "boolean",
            "title": "Withhold Power Update",
            "default": false
          }
        }
      },
      "hue": {
        "title": "Hue",
        "type": "object",
        "properties": {
          "setUrl": {
            "type": "object",
            "title": "Set URL",
            "required": true,
            "properties": {
              "url": {
                "type": "string",
                "title": "URL",
                "required": true,
                "default": "http://localhost/hue/%s"
              },
              "method": {
                "type": "string",
                "enum": ["GET", "POST", "PUT", "DELETE"],
                "default": "GET",
                "title": "HTTP Method"
              },
              "body": {
                "type": "string",
                "title": "Body (optional)"
              },
              "strictSSL": {
                "type": "boolean",
                "title": "Strict SSL",
                "default": false
              },
              "auth": {
                "type": "object",
                "title": "HTTP Authentication (optional)",
                "required": false,
                "properties": {
                  "username": {
                    "type": "string",
                    "title": "Username",
                    "required": true
                  },
                  "password": {
                    "type": "string",
                    "title": "Password",
                    "required": true
                  },
                  "sendImmediately": {
                    "type": "boolean",
                    "title": "Send Immediately",
                    "default": false
                  }
                }
              },
              "headers": {
                "type": "object",
                "title": "Headers (optional)",
                "required": false,
                "properties": {
                  "Content-Type": {
                    "type": "string",
                    "title": "Content-Type",
                    "default": "application/json"
                  },
                  "Custom-Header": {
                    "type": "string",
                    "title": "Custom Header"
                  }
                }
              }
            }
          },
          "statusUrl": {
            "type": "object",
            "title": "Status URL",
            "required": true,
            "properties": {
              "url": {
                "type": "string",
                "title": "URL",
                "required": true,
                "default": "http://localhost/status"
              },
              "method": {
                "type": "string",
                "enum": ["GET", "POST", "PUT", "DELETE"],
                "default": "GET",
                "title": "HTTP Method"
              },
              "body": {
                "type": "string",
                "title": "Body (optional)"
              },
              "strictSSL": {
                "type": "boolean",
                "title": "Strict SSL",
                "default": false
              },
              "auth": {
                "type": "object",
                "title": "HTTP Authentication (optional)",
                "required": false,
                "properties": {
                  "username": {
                    "type": "string",
                    "title": "Username",
                    "required": true
                  },
                  "password": {
                    "type": "string",
                    "title": "Password",
                    "required": true
                  },
                  "sendImmediately": {
                    "type": "boolean",
                    "title": "Send Immediately",
                    "default": false
                  }
                }
              },
              "headers": {
                "type": "object",
                "title": "Headers (optional)",
                "required": false,
                "properties": {
                  "Content-Type": {
                    "type": "string",
                    "title": "Content-Type",
                    "default": "application/json"
                  },
                  "Custom-Header": {
                    "type": "string",
                    "title": "Custom Header"
                  }
                }
              }
            }
          },
          "unit": {
            "type": "string",
            "enum": ["hsv", "zigbee"],
            "default": "hsv",
            "title": "Unit"
          },
          "statusPattern": {
            "type": "string",
            "title": "Status Pattern (RegExp)",
            "default": "([0-9]{1,3})"
          },
          "patternGroupToExtract": {
            "type": "integer",
            "title": "Pattern Group To Extract",
            "default": 1
          }
        }
      },
      "saturation": {
        "title": "Saturation",
        "type": "object",
        "properties": {
          "setUrl": {
            "type": "object",
            "title": "Set URL",
            "required": true,
            "properties": {
              "url": {
                "type": "string",
                "title": "URL",
                "required": true,
                "default": "http://localhost/sat/%s"
              },
              "method": {
                "type": "string",
                "enum": ["GET", "POST", "PUT", "DELETE"],
                "default": "GET",
                "title": "HTTP Method"
              },
              "body": {
                "type": "string",
                "title": "Body (optional)"
              },
              "strictSSL": {
                "type": "boolean",
                "title": "Strict SSL",
                "default": false
              },
              "auth": {
                "type": "object",
                "title": "HTTP Authentication (optional)",
                "required": false,
                "properties": {
                  "username": {
                    "type": "string",
                    "title": "Username",
                    "required": true
                  },
                  "password": {
                    "type": "string",
                    "title": "Password",
                    "required": true
                  },
                  "sendImmediately": {
                    "type": "boolean",
                    "title": "Send Immediately",
                    "default": false
                  }
                }
              },
              "headers": {
                "type": "object",
                "title": "Headers (optional)",
                "required": false,
                "properties": {
                  "Content-Type": {
                    "type": "string",
                    "title": "Content-Type",
                    "default": "application/json"
                  },
                  "Custom-Header": {
                    "type": "string",
                    "title": "Custom Header"
                  }
                }
              }
            }
          },
          "statusUrl": {
            "type": "object",
            "title": "Status URL",
            "properties": {
              "url": {
                "type": "string",
                "title": "URL",
                "default": "http://localhost/status"
              },
              "method": {
                "type": "string",
                "enum": ["GET", "POST", "PUT", "DELETE"],
                "default": "GET",
                "title": "HTTP Method"
              },
              "body": {
                "type": "string",
                "title": "Body (optional)"
              },
              "strictSSL": {
                "type": "boolean",
                "title": "Strict SSL",
                "default": false
              },
              "auth": {
                "type": "object",
                "title": "HTTP Authentication (optional)",
                "required": false,
                "properties": {
                  "username": {
                    "type": "string",
                    "title": "Username",
                    "required": true
                  },
                  "password": {
                    "type": "string",
                    "title": "Password",
                    "required": true
                  },
                  "sendImmediately": {
                    "type": "boolean",
                    "title": "Send Immediately",
                    "default": false
                  }
                }
              },
              "headers": {
                "type": "object",
                "title": "Headers (optional)",
                "required": false,
                "properties": {
                  "Content-Type": {
                    "type": "string",
                    "title": "Content-Type",
                    "default": "application/json"
                  },
                  "Custom-Header": {
                    "type": "string",
                    "title": "Custom Header"
                  }
                }
              }
            }
          },
          "unit": {
            "type": "string",
            "enum": ["percent", "rgb"],
            "default": "percent",
            "title": "Unit"
          },
          "statusPattern": {
            "type": "string",
            "title": "Status Pattern (RegExp)",
            "default": "([0-9]{1,3})"
          },
          "patternGroupToExtract": {
            "type": "integer",
            "title": "Pattern Group To Extract",
            "default": 1
          }
        }
      },
      "colorTemperature": {
        "title": "Color Temperature",
        "type": "object",
        "properties": {
          "setUrl": {
            "type": "object",
            "title": "Set URL",
            "required": true,
            "properties": {
              "url": {
                "type": "string",
                "title": "URL",
                "required": true,
                "default": "http://localhost/temp/%s"
              },
              "method": {
                "type": "string",
                "enum": ["GET", "POST", "PUT", "DELETE"],
                "default": "GET",
                "title": "HTTP Method"
              },
              "body": {
                "type": "string",
                "title": "Body (optional)"
              },
              "strictSSL": {
                "type": "boolean",
                "title": "Strict SSL",
                "default": false
              },
              "auth": {
                "type": "object",
                "title": "HTTP Authentication (optional)",
                "required": false,
                "properties": {
                  "username": {
                    "type": "string",
                    "title": "Username",
                    "required": true
                  },
                  "password": {
                    "type": "string",
                    "title": "Password",
                    "required": true
                  },
                  "sendImmediately": {
                    "type": "boolean",
                    "title": "Send Immediately",
                    "default": false
                  }
                }
              },
              "headers": {
                "type": "object",
                "title": "Headers (optional)",
                "required": false,
                "properties": {
                  "Content-Type": {
                    "type": "string",
                    "title": "Content-Type",
                    "default": "application/json"
                  },
                  "Custom-Header": {
                    "type": "string",
                    "title": "Custom Header"
                  }
                }
              }
            }
          },
          "statusUrl": {
            "type": "object",
            "title": "Status URL",
            "properties": {
              "url": {
                "type": "string",
                "title": "URL",
                "default": "http://localhost/status"
              },
              "method": {
                "type": "string",
                "enum": ["GET", "POST", "PUT", "DELETE"],
                "default": "GET",
                "title": "HTTP Method"
              },
              "body": {
                "type": "string",
                "title": "Body (optional)"
              },
              "strictSSL": {
                "type": "boolean",
                "title": "Strict SSL",
                "default": false
              },
              "auth": {
                "type": "object",
                "title": "HTTP Authentication (optional)",
                "required": false,
                "properties": {
                  "username": {
                    "type": "string",
                    "title": "Username",
                    "required": true
                  },
                  "password": {
                    "type": "string",
                    "title": "Password",
                    "required": true
                  },
                  "sendImmediately": {
                    "type": "boolean",
                    "title": "Send Immediately",
                    "default": false
                  }
                }
              },
              "headers": {
                "type": "object",
                "title": "Headers (optional)",
                "required": false,
                "properties": {
                  "Content-Type": {
                    "type": "string",
                    "title": "Content-Type",
                    "default": "application/json"
                  },
                  "Custom-Header": {
                    "type": "string",
                    "title": "Custom Header"
                  }
                }
              }
            }
          },
          "unit": {
            "type": "string",
            "enum": ["mired", "kelvin"],
            "default": "mired",
            "title": "Unit"
          },
          "minValue": {
            "type": "integer",
            "title": "Min Value",
            "default": 50
          },
          "maxValue": {
            "type": "integer",
            "title": "Max Value",
            "default": 400
          },
          "statusPattern": {
            "type": "string",
            "title": "Status Pattern (RegExp)",
            "default": "([0-9]{2,3})"
          },
          "patternGroupToExtract": {
            "type": "integer",
            "title": "Pattern Group To Extract",
            "default": 1
          }
        }
      },
      "auth": {
        "title": "HTTP Authentication",
        "type": "object",
        "properties": {
          "username": { "type": "string", "title": "Username" },
          "password": { "type": "string", "title": "Password" },
          "sendImmediately": { "type": "boolean", "title": "Send Immediately", "default": true }
        }
      },
      "statusCache": {
        "type": "integer",
        "title": "Power Status Cache (milliseconds)",
        "default": 0
      },
      "brightnessCache": {
        "type": "integer",
        "title": "Brightness Cache (milliseconds)",
        "default": 0
      },
      "hueCache": {
        "type": "integer",
        "title": "Hue Cache (milliseconds)",
        "default": 0
      },
      "saturationCache": {
        "type": "integer",
        "title": "Saturation Cache (milliseconds)",
        "default": 0
      },
      "colorTemperatureCache": {
        "type": "integer",
        "title": "Color Temperature Cache (milliseconds)",
        "default": 0
      },
      "pullInterval": {
        "type": "integer",
        "title": "Pull Interval (milliseconds)",
        "default": 0
      },
      "mqtt": {
        "title": "MQTT Options",
        "type": "object",
        "properties": {
          "host": {
            "type": "string",
            "title": "MQTT Host",
            "required": true
          },
          "port": {
            "type": "integer",
            "title": "MQTT Port",
            "default": 1883
          },
          "credentials": {
            "type": "object",
            "title": "MQTT Credentials",
            "properties": {
              "username": {
                "type": "string",
                "title": "MQTT Username",
                "required": true
              },
              "password": {
                "type": "string",
                "title": "MQTT Password"
              }
            }
          },
          "subscriptions": {
            "type": "array",
            "title": "MQTT Subscriptions",
            "required": true,
            "items": {
              "type": "object",
              "properties": {
                "topic": {
                  "type": "string",
                  "title": "MQTT Topic",
                  "required": true
                },
                "characteristic": {
                  "type": "string",
                  "title": "Characteristic",
                  "required": true
                },
                "messagePattern": {
                  "type": "string",
                  "title": "Message Pattern (RegExp)"
                },
                "patternGroupToExtract": {
                  "type": "integer",
                  "title": "Pattern Group To Extract",
                  "default": 1
                }
              }
            }
          },
          "protocol": {
            "type": "string",
            "title": "MQTT Protocol",
            "default": "mqtt"
          },
          "qos": {
            "type": "integer",
            "title": "MQTT QoS",
            "enum": [0, 1, 2],
            "default": 0
          },
          "clientId": {
            "type": "string",
            "title": "MQTT Client ID",
            "default": "'mqttjs_' + Math.random().toString(16).substr(2, 8)"
          },
          "keepalive": {
            "type": "integer",
            "title": "MQTT Keepalive",
            "default": 60
          },
          "clean": {
            "type": "boolean",
            "title": "MQTT Clean Session",
            "default": true
          },
          "reconnectPeriod": {
            "type": "integer",
            "title": "MQTT Reconnect Period (milliseconds)",
            "default": 1000
          },
          "connectTimeout": {
            "type": "integer",
            "title": "MQTT Connect Timeout (milliseconds)",
            "default": 30000
          }
        }
      },
      "setPowerTopic": {
        "type": "object",
        "title": "MQTT Set Power Topic",
        "properties": {
          "topic": {
            "type": "string",
            "title": "MQTT Topic",
            "required": true
          },
          "qos": {
            "type": "integer",
            "title": "MQTT QoS",
            "enum": [0, 1, 2],
            "default": 0
          },
          "retain": {
            "type": "boolean",
            "title": "MQTT Retain",
            "default": false
          },
          "dup": {
            "type": "boolean",
            "title": "MQTT Duplicate",
            "default": false
          },
          "payloadFormatter": {
            "type": "string",
            "title": "MQTT Payload Formatter"
          }
        }
      },
      "getPowerTopic": {
        "type": "object",
        "title": "MQTT Get Power Topic",
        "properties": {
          "topic": {
            "type": "string",
            "title": "MQTT Topic",
            "required": true
          },
          "qos": {
            "type": "integer",
            "title": "MQTT QoS",
            "enum": [0, 1, 2],
            "default": 0
          },
          "messagePattern": {
            "type": "string",
            "title": "Message Pattern (RegExp)"
          },
          "patternGroupToExtract": {
            "type": "integer",
            "title": "Pattern Group To Extract",
            "default": 1
          }
        }
      },
      "notificationID": {
        "type": "string",
        "title": "Notification ID"
      },
      "notificationPassword": {
        "type": "string",
        "title": "Notification Password"
      }
    }
    }
}
