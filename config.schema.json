{
  "pluginAlias": "HTTP-LIGHTBULB",
  "pluginType": "accessory",
  "singular": true,
  "headerDisplay": "HTTP Lightbulb Accessory",
  "schema": {
    "type": "object",
    "properties": {
      "accessory": {
        "type": "string",
        "title": "Accessory Type",
        "default": "HTTP-LIGHTBULB"
      },
      "name": {
        "title": "Name",
        "type": "string",
        "default": "HTTP Lightbulb"
      },
      "onUrl": { "type": ["string", "object"], "title": "On URL" },
      "offUrl": { "type": ["string", "object"], "title": "Off URL" },
      "statusUrl": { "type": ["string", "object"], "title": "Status URL" },
      "statusPattern": { "type": "string", "title": "Power Status Pattern (RegExp)", "default": "1" },
      "statusCache": {
        "type": "integer",
        "title": "Power Status Cache (milliseconds)",
        "default": 0
      },
      "pullInterval": {
        "type": "integer",
        "title": "Pull Interval (milliseconds)",
        "default": 0
      },
      "brightness": {
        "title": "Brightness",
        "type": "object",
        "properties": {
          "setUrl": { "type": ["string", "object"], "title": "Set URL" },
          "statusUrl": { "type": ["string", "object"], "title": "Status URL" },
          "unit": {
            "type": "string",
            "enum": ["percent", "rgb"],
            "default": "percent",
            "title": "Unit"
          },
          "statusPattern": { "type": "string", "title": "Status Pattern (RegExp)", "default": "([0-9]{1,3})" },
          "patternGroupToExtract": { "type": "integer", "title": "Pattern Group To Extract", "default": 1 },
          "withholdPowerUpdate": { "type": "boolean", "title": "Withhold Power Update", "default": false },
          "minValue": { "type": "integer", "title": "Min Value" },
          "maxValue": { "type": "integer", "title": "Max Value" }
        }
      },
      "brightnessCache": {
        "type": "integer",
        "title": "Brightness Cache (milliseconds)",
        "default": 0
      },
      "hue": {
        "title": "Hue",
        "type": "object",
        "properties": {
          "setUrl": { "type": ["string", "object"], "title": "Set URL" },
          "statusUrl": { "type": ["string", "object"], "title": "Status URL" },
          "unit": {
            "type": "string",
            "enum": ["hsv", "zigbee"],
            "default": "hsv",
            "title": "Unit"
          },
          "statusPattern": { "type": "string", "title": "Status Pattern (RegExp)", "default": "([0-9]{1,3})" },
          "patternGroupToExtract": { "type": "integer", "title": "Pattern Group To Extract", "default": 1 }
        }
      },
      "hueCache": {
        "type": "integer",
        "title": "Hue Cache (milliseconds)",
        "default": 0
      },
      "saturation": {
        "title": "Saturation",
        "type": "object",
        "properties": {
          "setUrl": { "type": ["string", "object"], "title": "Set URL" },
          "statusUrl": { "type": ["string", "object"], "title": "Status URL" },
          "unit": {
            "type": "string",
            "enum": ["percent", "rgb"],
            "default": "percent",
            "title": "Unit"
          },
          "statusPattern": { "type": "string", "title": "Status Pattern (RegExp)", "default": "([0-9]{1,3})" },
          "patternGroupToExtract": { "type": "integer", "title": "Pattern Group To Extract", "default": 1 }
        }
      },
      "saturationCache": {
        "type": "integer",
        "title": "Saturation Cache (milliseconds)",
        "default": 0
      },
      "colorTemperature": {
        "title": "Color Temperature",
        "type": "object",
        "properties": {
          "setUrl": { "type": ["string", "object"], "title": "Set URL" },
          "statusUrl": { "type": ["string", "object"], "title": "Status URL" },
          "unit": {
            "type": "string",
            "enum": ["mired", "kelvin"],
            "default": "mired",
            "title": "Unit"
          },
          "statusPattern": { "type": "string", "title": "Status Pattern (RegExp)", "default": "([0-9]{2,3})" },
          "patternGroupToExtract": { "type": "integer", "title": "Pattern Group To Extract", "default": 1 },
          "minValue": { "type": "integer", "title": "Min Value", "default": 50 },
          "maxValue": { "type": "integer", "title": "Max Value", "default": 400 }
        }
      },
      "colorTemperatureCache": {
        "type": "integer",
        "title": "Color Temperature Cache (milliseconds)",
        "default": 0
      },
      "auth": {
        "title": "HTTP Authentication",
        "type": "object",
        "properties": {
          "username": { "type": "string", "title": "Username" },
          "password": { "type": "string", "title": "Password" },
          "sendImmediately": { "type": "boolean", "title": "Send Immediately", "default": true }
        }
      },
      "mqtt": {
        "title": "MQTT Options",
        "type": "object",
        "properties": {
          "host": { "type": "string", "title": "MQTT Host" },
          "port": { "type": "integer", "title": "MQTT Port", "default": 1883 },
          "username": { "type": "string", "title": "MQTT Username" },
          "password": { "type": "string", "title": "MQTT Password" },
          "topic": { "type": "string", "title": "MQTT Topic" }
        }
      },
      "setPowerTopic": { "type": ["string", "object"], "title": "MQTT Set Power Topic" },
      "getPowerTopic": { "type": ["string", "object"], "title": "MQTT Get Power Topic" },
      "notificationID": {
        "type": "string",
        "title": "Notification ID"
      },
      "notificationPassword": {
        "type": "string",
        "title": "Notification Password"
      },
      "debug": {
        "type": "boolean",
        "title": "Enable Debug Logging",
        "default": false
      }
    },
    "required": ["accessory", "name", "onUrl", "offUrl", "statusUrl"]
  },
  "layout": [
    {
      "type": "fieldset",
      "title": "General",
      "items": [
        "accessory",
        "name",
        "onUrl",
        "offUrl",
        "statusUrl",
        "statusPattern",
        "statusCache",
        "pullInterval",
        "debug"
      ]
    },
    {
      "type": "fieldset",
      "title": "Brightness",
      "items": [
        { "key": "brightness", "type": "fieldset", "title": "Brightness" },
        "brightnessCache"
      ]
    },
    {
      "type": "fieldset",
      "title": "Hue",
      "items": [
        { "key": "hue", "type": "fieldset", "title": "Hue" },
        "hueCache"
      ]
    },
    {
      "type": "fieldset",
      "title": "Saturation",
      "items": [
        { "key": "saturation", "type": "fieldset", "title": "Saturation" },
        "saturationCache"
      ]
    },
    {
      "type": "fieldset",
      "title": "Color Temperature",
      "items": [
        { "key": "colorTemperature", "type": "fieldset", "title": "Color Temperature" },
        "colorTemperatureCache"
      ]
    },
    {
      "type": "fieldset",
      "title": "MQTT",
      "items": [
        { "key": "mqtt", "type": "fieldset", "title": "MQTT Options" },
        "setPowerTopic",
        "getPowerTopic"
      ]
    },
    {
      "type": "fieldset",
      "title": "Notifications",
      "items": [
        "notificationID",
        "notificationPassword"
      ]
    },
    {
      "type": "fieldset",
      "title": "Authentication",
      "items": [
        { "key": "auth", "type": "fieldset", "title": "HTTP Authentication" }
      ]
    }
  ]
}
